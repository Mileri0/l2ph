var
  m: TStrings;
  i: Integer;
  Message, Name: String;

procedure Init;
begin
  m:=TStringList.Create;
  Message:='hi ';  //  <<---- Текст рекламного сообщения.
end;

procedure Free;
begin
  m.Free;
end;

procedure SendPrivate(Name: string);
begin
  buf:=#$38;
  WriteS(Message+Name);
  WriteD(2);
  WriteS(Name);
  SendToServer;
  buf:=#$38;
  WriteS(Message+Name);
  WriteD(1);
  SendToServer;
end;

begin
if FromServer and (pck[1]=#$03) then
  begin
   i:=22;
   Name:=ReadS(i);
   if m.IndexOf(Name)=-1 then begin
     SendPrivate(Name);
     m.Add(Name);
   end;
  end;
end.
